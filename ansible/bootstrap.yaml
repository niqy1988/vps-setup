---

- name: Set up ansible remote user
  hosts: all
  remote_user: "{{ bootstrap_username | default('root') }}"
  become: yes
  vars:
    ansible_ssh_private_key_file: "{{ bootstrap_ssh_private_key_file | default(root_ssh_private_key_file) }}"
  roles:
    - role: ansible_access

- name: Disable ssh login by password and empty passwords
  hosts: all
  become: yes
  vars:
    sshd:
      PermitEmptyPasswords: no
      PasswordAuthentication: no
  roles:
    - role: willshersystems.sshd

{
    "log": {
        "access": "/var/log/xray/access.log",
        "error": "/var/log/xray/error.log",
        "loglevel": "warning"
    },
    "inbounds": [
        {
            "port": {{ xray_port }},
            "protocol": "vless",
            "settings": {
                "decryption": "none",
                "clients": {{ xray_clients | to_nice_json }}
            },
            "streamSettings": {
                "network": "ws",
                "security": "none",
                "wsSettings": {
                    "path": "{{ xray_url_path }}"
                }
            }
        }
    ],
    "routing": {
        "domainStrategy": "IPIfNonMatch",
        "domainMatcher": "hybrid",
        "rules": [
            {
                "type": "field",
                "ip": ["::0/0"],
                "outboundTag": "v6"
            }
        ]
    },
    "outbounds": [
        {
            "tag": "v4",
            "protocol": "freedom",
            "streamSettings": {
                "sockopt": {
                    "domainStrategy": "UseIPv4"
                }
            }
        },
        {
            "tag": "v6",
            "protocol": "freedom",
            "streamSettings": {
                "sockopt": {
                    "domainStrategy": "UseIPv6"
                }
            }
        }
    ]
}
